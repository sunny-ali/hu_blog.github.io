(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{516:function(n,s,t){"use strict";t.r(s);var a=t(4),e=Object(a.a)({},(function(){var n=this,s=n.$createElement,t=n._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("p",[n._v("有时候前端需要将上传的文件发送给后台，进行前后端的交互，下面是二种简单的方式：")]),n._v(" "),t("h2",{attrs:{id:"第一种方式-利用ajax"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一种方式-利用ajax"}},[n._v("#")]),n._v(" 第一种方式：利用ajax")]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('<!DOCTYPE html>\n<html lang="en">\n<head> \n<meta charset="UTF-8"> \n<title>上传文件</title> \n</head>\n\n<body>\n  <input type="text" id="name">\n  <input type="file" id="file" >\n  <button onclick="submit()">提交</button>\n</body>\n\n<script>\n\tfunction submit(){\n\t\t//利用ajax请求会存在跨域问题，但是使用form表单标签是不存在跨域的\n\t\tvar file = document.getElementById(\'file\').files[0]\n\t\t\n\t\tvar name = document.getElementById(\'name\').value\n\t\t\n\t\tvar formData = new FormData()\n\t\t\n\t\tformData.append(\'file\',file)\n\t\t\n\t\tformData.append(\'name\',name)\n\t\t\n\t\tvar xhr = new XMLHttpRequest()\n\t\t\n\t\txhr.open(\'POST\',\'http://172.20.10.7:8080/upload\')\n\t\t\n       //xhr.setRequestHeader("Content-type","multipart/form-data")//这行不需要加默认会自动匹配\n\t\t\n\t\txhr.send(formData)\n\t\t\n\t\txhr.onreadystatechange=function(){\n\t\t\t\n         if (xhr.readyState==4 && xhr.status==200)\n         {\n           console.log(\'成功发送~\')\n         }\n        }\t\n\t}\n\t\n<\/script>\n</html>\n')])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br"),t("span",{staticClass:"line-number"},[n._v("19")]),t("br"),t("span",{staticClass:"line-number"},[n._v("20")]),t("br"),t("span",{staticClass:"line-number"},[n._v("21")]),t("br"),t("span",{staticClass:"line-number"},[n._v("22")]),t("br"),t("span",{staticClass:"line-number"},[n._v("23")]),t("br"),t("span",{staticClass:"line-number"},[n._v("24")]),t("br"),t("span",{staticClass:"line-number"},[n._v("25")]),t("br"),t("span",{staticClass:"line-number"},[n._v("26")]),t("br"),t("span",{staticClass:"line-number"},[n._v("27")]),t("br"),t("span",{staticClass:"line-number"},[n._v("28")]),t("br"),t("span",{staticClass:"line-number"},[n._v("29")]),t("br"),t("span",{staticClass:"line-number"},[n._v("30")]),t("br"),t("span",{staticClass:"line-number"},[n._v("31")]),t("br"),t("span",{staticClass:"line-number"},[n._v("32")]),t("br"),t("span",{staticClass:"line-number"},[n._v("33")]),t("br"),t("span",{staticClass:"line-number"},[n._v("34")]),t("br"),t("span",{staticClass:"line-number"},[n._v("35")]),t("br"),t("span",{staticClass:"line-number"},[n._v("36")]),t("br"),t("span",{staticClass:"line-number"},[n._v("37")]),t("br"),t("span",{staticClass:"line-number"},[n._v("38")]),t("br"),t("span",{staticClass:"line-number"},[n._v("39")]),t("br"),t("span",{staticClass:"line-number"},[n._v("40")]),t("br"),t("span",{staticClass:"line-number"},[n._v("41")]),t("br"),t("span",{staticClass:"line-number"},[n._v("42")]),t("br"),t("span",{staticClass:"line-number"},[n._v("43")]),t("br"),t("span",{staticClass:"line-number"},[n._v("44")]),t("br"),t("span",{staticClass:"line-number"},[n._v("45")]),t("br")])]),t("h2",{attrs:{id:"第二种-采用form表单标签"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二种-采用form表单标签"}},[n._v("#")]),n._v(" 第二种：采用form表单标签")]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('<!DOCTYPE html>\n<html lang="en">\n<head> \n<meta charset="UTF-8"> \n<title>上传文件</title> \n</head>\n<body>\n//一定要写内容类型："multipart/form-data"\n<form action="http://172.20.10.7:8080/upload" method="post" enctype="multipart/form-data">\n   <input type="text" name="name" >\n  <input type="file" name="file" >\n  <input type="submit" value="提交">\n</form>\n</body>\n</html>\n')])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br")])]),t("h2",{attrs:{id:"这二种主要区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#这二种主要区别"}},[n._v("#")]),n._v(" 这二种主要区别：")]),n._v(" "),t("p",[t("strong",[n._v("1，form表单标签上传(不需要处里跨域，不需要返回，比较适用于前后端不分离的项目)\n2，ajax上传(需要处理跨域，需要拿到后端的返回结果来更新页面)")])]),n._v(" "),t("h1",{attrs:{id:"关于为什么form表单能够处理跨域"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关于为什么form表单能够处理跨域"}},[n._v("#")]),n._v(" 关于为什么form表单能够处理跨域？")]),n._v(" "),t("p",[n._v("浏览器的策略本质是：一个域名下面的JS，没有经过允许是不能读取另外一个域名的内容，但是浏览器不阻止你向另外一个域名发送请求。\n所以form表单提交没有跨域问题，提交form表单到另外一个域名，原来页面是无法获取新页面的内容，或者说form提交后不需要返回，但是ajax是需要返回的。\n而ajax是想要读取响应内容，浏览器是不允许你这么做的。\n世界本无跨域，是浏览器不允许js访问别的域，但是浏览器却没有限制自己，img标签和script标签都是可以加载其他域的图片或者js文件。这不就是jsonp的跨域嘛，利用浏览器的历史兼容性。\n浏览器的安全策略限制的是js脚本，并不限制src，form表单提交之类的请求。就是说form表单提交不存在安全问题，ajax提交跨域存在安全问题。")])])}),[],!1,null,null,null);s.default=e.exports}}]);