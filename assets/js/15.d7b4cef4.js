(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{498:function(s,n,e){"use strict";e.r(n);var t=e(4),a=Object(t.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"在react中使用redux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在react中使用redux"}},[s._v("#")]),s._v(" 在react中使用redux")]),s._v(" "),e("p",[e("strong",[s._v("redux是什么？")])]),s._v(" "),e("ol",[e("li",[s._v("redux是一个独立专门用于做状态管理的JS库(不是react插件库)")]),s._v(" "),e("li",[s._v("它可以用在react，angular，vue等项目中，但基本与react配合使用")]),s._v(" "),e("li",[s._v("作用：集中式管理react应用中的多个组件共享的状态\nredux工作流程：\n"),e("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200608143743498.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgyNDgzOQ==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})])]),s._v(" "),e("p",[e("strong",[s._v("什么情况下需要使用redux")])]),s._v(" "),e("ol",[e("li",[s._v("总体原则：能不用就不用")]),s._v(" "),e("li",[s._v("某个组件的状态需要共享")]),s._v(" "),e("li",[s._v("某个状态需要在任何地方都可以拿到")]),s._v(" "),e("li",[s._v("一个组件需要改变全局状态")]),s._v(" "),e("li",[s._v("一个组件需要改变另一个组件的状态")])]),s._v(" "),e("h1",{attrs:{id:"redux的核心api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redux的核心api"}},[s._v("#")]),s._v(" redux的核心API")]),s._v(" "),e("h2",{attrs:{id:"createstore"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#createstore"}},[s._v("#")]),s._v(" createStore()")]),s._v(" "),e("p",[s._v("作用：创建包含指定reducer的对象\n编码：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import {createStore} from 'redux'\nimport counter from './reducers/counter'\nconst store = createStore(counter)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"store对象"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#store对象"}},[s._v("#")]),s._v(" store对象：")]),s._v(" "),e("p",[s._v("作用：redux库最核心的管理对象\n它的内部维护着：state，reducer\n核心方法：\n"),e("strong",[s._v("getState()\ndispatch(action)\nsubscribe(listener)")]),s._v("\n编码：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" store.getState()\nstore.dispatch({type:'INCREMENT', number})\nstore.subscribe(render)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"applymiddleware"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#applymiddleware"}},[s._v("#")]),s._v(" applyMiddleware()")]),s._v(" "),e("p",[s._v("作用：应用上基于redux的中间件(插件库)\n编码：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import {createStore, applyMiddleware} from 'redux'\nimport thunk from 'redux-thunk'  // redux异步中间件\nconst store = createStore(\n  counter,\n  applyMiddleware(thunk) // 应用上异步中间件\n)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h2",{attrs:{id:"combinereducers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#combinereducers"}},[s._v("#")]),s._v(" combineReducers()")]),s._v(" "),e("p",[s._v("作用：合并多个reducer函数\n编码：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("export default combineReducers({\n  user,\n  chatUser,\n  chat\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h1",{attrs:{id:"redux的三个核心概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redux的三个核心概念"}},[s._v("#")]),s._v(" redux的三个核心概念")]),s._v(" "),e("h2",{attrs:{id:"action"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#action"}},[s._v("#")]),s._v(" action")]),s._v(" "),e("p",[s._v("：标识要执行行为的对象；包含2个方面的属性：\ntype:标识属性，值为字符串，唯一，必要属性\nxxx：数据属性，值类型任意，可选属性\n例子：\n"),e("code",[s._v("const action = { \t\ttype: 'INCREMENT', \t\t\t data: 2 \t\t }")]),s._v("\nAction Creator(创建Action的工厂函数)\nconst increment = (number) => ({type: 'INCREMENT', data: number})")]),s._v(" "),e("h1",{attrs:{id:"reducer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reducer"}},[s._v("#")]),s._v(" reducer：")]),s._v(" "),e("p",[s._v("根据旧的state和action, 产生新的state的纯函数\n样例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("export default function counter(state = 0, action) {\n\t\t  switch (action.type) {\n\t\t    case 'INCREMENT':\n\t\t      return state + action.data\n\t\t    case 'DECREMENT':\n\t\t      return state - action.data\n\t\t    default:\n\t\t      return state\n\t\t  }\n\t\t}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("注意：返回一个新的状态，不要修改原来的状态")]),s._v(" "),e("h2",{attrs:{id:"store"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#store"}},[s._v("#")]),s._v(" "),e("strong",[s._v("store：")])]),s._v(" "),e("p",[s._v("将state，action与reducer联系在一起的对象\n得到此对象：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("        import {createStore} from 'redux'\n\t\timport reducer from './reducers'\n\t\tconst store = createStore(reducer)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("此对象的功能：\ngetState(): 得到state\ndispatch(action): 分发action, 触发reducer调用, 产生新的state\nsubscribe(listener): 注册监听, 当产生了新的state时, 自动调用")]),s._v(" "),e("h1",{attrs:{id:"使用redux编写应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用redux编写应用"}},[s._v("#")]),s._v(" 使用redux编写应用：")]),s._v(" "),e("p",[s._v("下载依赖包：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install --save redux\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("redux/action-type.js")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/*\nAction对象的type常量名称模块\n */\nexport const INCREMENT = 'increment'\nexport const DECREMENT = 'decrement'\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("redux/action.js")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/*\naction creator模块\n */\nimport {INCREMENT, DECREMENT} from './action-types'\n\nexport const increment = number => ({type: INCREMENT, number})\nexport const decrement = number => ({type: DECREMENT, number})\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("redux/reducers.js")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 根据老的state和指定action，处理返回一个新的state\nimport {INCREMENT,DECREMENT} from \"./action-types\";\nexport function counter(state=0,action) {\n  console.log('counter',state,action)\n  switch (action.type) {\n    case INCREMENT:\n      return state + action.number\n    case DECREMENT:\n      return state - action.number\n    default:\n      return state\n  }\n}\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("p",[s._v("index.js")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {createStore} from 'redux'\nimport App from './components/App';\nimport {counter} from './redux/reducers'\n\n//根据counter函数创建store对象\nconst store = createStore(counter)\n// 定义渲染根组件标签的函数\nconst render = () => {\n  ReactDOM.render(\n    <App store={store}/>,\n    document.getElementById('root')\n  )\n}\n// 初始化渲染\nrender()\n\n//注册（订阅）监听，一旦状态发生改变，自动重新渲染\nstore.subscribe(render)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("p",[s._v("components/App.js\n首先需要下载 props-types依赖包")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install --save props-types\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/*\n应用组件\n */\nimport React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport * as actions from '../redux/actions'\n\nexport default class App extends Component {\n\n  static propTypes = {\n    store: PropTypes.object.isRequired,\n  }\n\n  increment = () => {\n    const number = this.refs.numSelect.value * 1\n    this.props.store.dispatch(actions.increment(number))\n  }\n\n  decrement = () => {\n    const number = this.refs.numSelect.value * 1\n    this.props.store.dispatch(actions.decrement(number))\n  }\n\n  incrementIfOdd = () => {\n    const number = this.refs.numSelect.value * 1\n\n    let count = this.props.store.getState()\n    if (count % 2 === 1) {\n      this.props.store.dispatch(actions.increment(number))\n    }\n  }\n\n  incrementAsync = () => {\n    const number = this.refs.numSelect.value * 1\n    setTimeout(() => {\n      this.props.store.dispatch(actions.increment(number))\n    }, 1000)\n  }\n\n  render() {\n    return (\n      <div>\n        <p>\n          click {this.props.store.getState()} times {' '}\n        </p>\n        <select ref=\"numSelect\">\n          <option value=\"1\">1</option>\n          <option value=\"2\">2</option>\n          <option value=\"3\">3</option>\n        </select>{' '}\n        <button onClick={this.increment}>+</button>\n        {' '}\n        <button onClick={this.decrement}>-</button>\n        {' '}\n        <button onClick={this.incrementIfOdd}>increment if odd</button>\n        {' '}\n        <button onClick={this.incrementAsync}>increment async</button>\n      </div>\n    )\n  }\n}\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br")])]),e("p",[s._v("问题：redux与react组件的代码耦合度太高，编码不够简洁")]),s._v(" "),e("h2",{attrs:{id:"react-reudx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-reudx"}},[s._v("#")]),s._v(" react-reudx")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("一个react插件库，专门用来简化react应用中使用redux\n")])])]),e("p",[s._v("将所有组件分为两大类：\nUI组件：")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("只负责UI的呈现，不带有任何业务逻辑")])]),s._v(" "),e("li",[e("p",[s._v("通过props接受数据（一般数据和函数）")])]),s._v(" "),e("li",[e("p",[s._v("不使用任何redux的API")])]),s._v(" "),e("li",[e("p",[s._v("一般保存在components文件夹中")])]),s._v(" "),e("li",[e("p",[s._v("List item")])])]),s._v(" "),e("p",[s._v("容器组件：")]),s._v(" "),e("p",[s._v("负责管理数据和业务逻辑，不负责UI呈现")]),s._v(" "),e("ul",[e("li",[s._v("使用redux的API")]),s._v(" "),e("li",[s._v("一般保存在containers文件夹下")])]),s._v(" "),e("p",[s._v("相关的API：")]),s._v(" "),e("h2",{attrs:{id:"provider"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#provider"}},[s._v("#")]),s._v(" Provider：")]),s._v(" "),e("p",[s._v("让所有组件都可以得到state数据")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<Provider store={store}>\n      <App/>\n    </Provider>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"connect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#connect"}},[s._v("#")]),s._v(" connect()：")]),s._v(" "),e("p",[s._v("用于包装UI组件生成容器组件（将组件与react-redux连接起来）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import {connect} from 'react-redux'\n//引入action函数\nconnect(\n  mapStateToProps,//映射状态成为属性，是一个函数返回的是一个对象\n  mapDispatchToProps,//是一个对象，返回的是一个action方法。最终会转化为dispatch调用的一个函数\n)(Counter)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h2",{attrs:{id:"mapstatetoprops"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mapstatetoprops"}},[s._v("#")]),s._v(" mapStateToprops()")]),s._v(" "),e("p",[s._v("将外部的数据(即state对象)转换为UI组件的标签属性")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const mapStateToprops = function (state) {\n  return {\n    value: state\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"mapdispatchtoprops"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mapdispatchtoprops"}},[s._v("#")]),s._v(" mapDispatchToProps()")]),s._v(" "),e("p",[s._v("将分发action的函数转换为UI组件的标签属性\n简洁语法可以直接指定为actions对象或包含多个action方法")]),s._v(" "),e("h1",{attrs:{id:"使用react-redux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用react-redux"}},[s._v("#")]),s._v(" 使用react-redux")]),s._v(" "),e("p",[s._v("1，npm install --save react-redux\n2，redux/action-types.js不变\n3，redux/action.js不变\n4，redux/reducers.js不变\n5，containers/App.jsx")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('// 包含Counter组件的容器组件\nimport React from "react";\n//引入连接函数\nimport {connect} from \'react-redux\'\n//引入action函数\nimport {increment,decrement} from "../redux/actions";\n\nimport Counter from "../components/Counter";\n\n\n//向外暴露连接App组件的包装组件\nexport default connect(\n  state =>({count: state}),//是一个函数\n  {increment,decrement}\n)(Counter)\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[s._v("6，components/Counter.jsx")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/*\n应用组件\n */\nimport React, {Component} from 'react'\nimport PropTypes from 'prop-types'\n// import * as actions from '../redux/actions'\n\nexport default class Counter extends Component {\n\n  static propTypes = {\n    // store: PropTypes.object.isRequired,\n    count: PropTypes.number.isRequired,\n    increment: PropTypes.func.isRequired,\n    decrement: PropTypes.func.isRequired\n  }\n\n  increment = () => {\n    const number = this.refs.numSelect.value * 1\n    // this.props.store.dispatch(actions.increment(number))\n    this.props.increment(number)\n  }\n\n  decrement = () => {\n    const number = this.refs.numSelect.value * 1\n    // this.props.store.dispatch(actions.decrement(number))\n    this.props.decrement(number)\n  }\n\n  incrementIfOdd = () => {\n    const number = this.refs.numSelect.value * 1\n\n    // let count = this.props.store.getState()\n    let count = this.props.count\n    if (count % 2 === 1) {\n      // this.props.store.dispatch(actions.increment(number))\n      this.props.increment(number)\n    }\n  }\n\n  incrementAsync = () => {\n    const number = this.refs.numSelect.value * 1\n    setTimeout(() => {\n      // this.props.store.dispatch(actions.increment(number))\n      this.props.increment(number)\n    }, 1000)\n  }\n\n  render() {\n    return (\n      <div>\n        <p>\n          click {this.props.count} times {' '}\n        </p>\n        <select ref=\"numSelect\">\n          <option value=\"1\">1</option>\n          <option value=\"2\">2</option>\n          <option value=\"3\">3</option>\n        </select>{' '}\n        <button onClick={this.increment}>+</button>\n        {' '}\n        <button onClick={this.decrement}>-</button>\n        {' '}\n        <button onClick={this.incrementIfOdd}>increment if odd</button>\n        {' '}\n        <button onClick={this.incrementAsync}>increment async</button>\n      </div>\n    )\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br"),e("span",{staticClass:"line-number"},[s._v("66")]),e("br"),e("span",{staticClass:"line-number"},[s._v("67")]),e("br"),e("span",{staticClass:"line-number"},[s._v("68")]),e("br"),e("span",{staticClass:"line-number"},[s._v("69")]),e("br")])])])}),[],!1,null,null,null);n.default=a.exports}}]);